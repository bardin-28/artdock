const mainNews=document.querySelector(".mainNews__content"),sideNews=document.querySelector(".sideNews__content"),mainUrl="https://renemorozowich.com/wp-json/wp/v2/posts",sideUrl="https://renemorozowich.com/wp-json/wp/v2/posts?categories=33",mediaUrl="https://renemorozowich.com/wp-json/wp/v2/media/",getData=(e,t,n)=>{let a=[];fetch(e).then(e=>e.json()).then(e=>{a.push({type:"media",data:e}),3==a.length&&mainNewsToPage(a)}),fetch(t).then(e=>e.json()).then(e=>{a.push({type:"main",data:e}),3==a.length&&mainNewsToPage(a)}),fetch(n).then(e=>e.json()).then(e=>{a.push({type:"latest",data:e}),3==a.length&&mainNewsToPage(a)})};getData(mediaUrl,mainUrl,sideUrl);const getZero=e=>0==e?e+"0":e>0&&e<10?"0"+e:e,mainNewsToPage=e=>{let t=[],n=[],a=[];for(let i=0;i<e.length;i++)"main"==e[i].type?t=e[i].data:"media"==e[i].type?a=e[i].data:n=e[i].data;t.map((e,t)=>{let n=new Date(e.date),i=getZero(n.getDate()),s=getZero(n.getMonth()),o=n.getFullYear();a.map((t,n)=>{let a=e.excerpt.rendered.slice(0,200),r=a.split(" ");r.splice(r.length-1,1),a=r.join(" "),e.id===t.post&&(mainNews.innerHTML+=`\n                <div class="mainNews__item">\n                    <p class="mainNews__category">Category: ${e.categories[0]}</p>\n                    <img src="${t.source_url}"/>\n                    <div >\n                        <a href="#"> ${e.title.rendered}</a>\n                        <div class="mainNews__caption">\n                            ${a+" ...</p>"}\n                            <div>\n                                <time>${i}.${s}.${o}</time>\n                                <p>author:${e.author}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>                 \n                `)})}),n.map((e,t)=>{let n=new Date(e.date),a=getZero(n.getDate()),i=getZero(n.getMonth()),s=n.getFullYear();sideNews.innerHTML+=`\n            <div class="sideNews__item">\n                <p>Categ: ${e.categories[0]}</p>\n                <a href="#">${e.title.rendered}</a>\n                <div class="item-caption">\n                    <time>${a}.${i}.${s}</time>\n                    <p>author:${e.author}</p>\n                </div>\n            </div>\n             `})},moreNewsBtn=document.querySelector("#moreNews");moreNewsBtn.addEventListener("click",()=>{moreNewsBtn.innerHTML="Loading...",getMoreNews(mediaUrl,mainUrl),event.preventDefault()});const getMoreNews=(e,t)=>{let n=[];fetch(e).then(e=>e.json()).then(e=>{n.push({type:"media",data:e}),2==n.length&&moreNewsToPage(n)}),fetch(t).then(e=>e.json()).then(e=>{n.push({type:"main",data:e}),2==n.length&&moreNewsToPage(n)})},moreNewsToPage=e=>{moreNewsBtn.innerHTML="show more";let t=[],n=[];for(let a=0;a<e.length;a++)"main"==e[a].type?t=e[a].data:"media"==e[a].type?n=e[a].data:dataSide=e[a].data;let a=t.filter((e,t)=>t<6);console.log(a),a.map((e,t)=>{let a=new Date(e.date),i=getZero(a.getDate()),s=getZero(a.getMonth()),o=a.getFullYear();n.map((t,n)=>{let a=e.excerpt.rendered.slice(0,200),r=a.split(" ");r.splice(r.length-1,1),a=r.join(" "),e.id===t.post&&(mainNews.innerHTML+=`\n                <div class="mainNews__item">\n                    <p class="mainNews__category">Category: ${e.categories[0]}</p>\n                    <img src="${t.source_url}"/>\n                    <div >\n                        <a href="#"> ${e.title.rendered}</a>\n                        <div class="mainNews__caption">\n                            ${a+" ...</p>"}\n                            <div>\n                                <time>${i}.${s}.${o}</time>\n                                <p>author:${e.author}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>                 \n                `)})})};